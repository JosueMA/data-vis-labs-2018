<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Alison Hill" />


<title>Lab 03: Playing with Color</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">CS631 Labs</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="00-install_name_plot.html">Day One in R</a>
</li>
<li>
  <a href="https://sakai.ohsu.edu/portal/site/CS-631-1-32176-Sp18">Sakai</a>
</li>
<li>
  <a href="data-vis-resources.html">Resources</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Lab 03: Playing with Color</h1>
<h3 class="subtitle"><em>CS631</em></h3>
<h4 class="author"><em>Alison Hill</em></h4>

</div>


<div id="goals-for-lab-03" class="section level1">
<h1><span class="header-section-number">1</span> Goals for Lab 03</h1>
</div>
<div id="packages" class="section level1">
<h1><span class="header-section-number">2</span> Packages</h1>
<pre class="r"><code>library(tidyverse)
library(forcats)
library(RColorBrewer)
library(viridis)
library(ggthemes)
library(wesanderson)
library(beyonce)</code></pre>
<p><a href="https://github.com/EmilHvitfeldt/r-color-palettes" class="uri">https://github.com/EmilHvitfeldt/r-color-palettes</a></p>
</div>
<div id="read-in-the-data" class="section level1">
<h1><span class="header-section-number">3</span> Read in the data</h1>
<p>Use this code chunk to read in the data available at <a href="http://bit.ly/cs631-beer" class="uri">http://bit.ly/cs631-beer</a>:</p>
<pre class="r"><code>library(tidyverse)
animal_words &lt;- read_csv(here::here(&quot;data&quot;,
                                    &quot;animal_age_summary.csv&quot;))</code></pre>
</div>
<div id="know-your-data" class="section level1">
<h1><span class="header-section-number">4</span> Know your data</h1>
<ul>
<li>How many variables?</li>
<li>How many total kids do we have data for?</li>
<li>How many ages (in months)?</li>
<li>How many kids per age?</li>
<li>How many types of animal words?</li>
</ul>
<p>Animals: - Cat item 22 (plus kitty item 36) - Chicken item 23 (plus hen item 34) - Dog item 26 (plus puppy item 46)</p>
</div>
<div id="categorical-vs-continuous" class="section level1">
<h1><span class="header-section-number">5</span> Categorical vs continuous</h1>
<p>In order to use color with your data, most importantly, you need to know if you’re dealing with a categorical or continuous variable.</p>
<ol style="list-style-type: decimal">
<li>Do an HLO!</li>
<li>Use <code>forcats</code>!</li>
</ol>
</div>
<div id="colour-vs-fill-aesthetic" class="section level1">
<h1><span class="header-section-number">6</span> Colour vs fill aesthetic</h1>
<p>Fill and colour scales in ggplot2 can use the same palettes. Some shapes such as lines only accept the colour aesthetic, while others, such as polygons, accept both colour and fill aesthetics. In the latter case, the colour refers to the border of the shape, and the fill to the interior.</p>
<pre class="r"><code>## A look at all 25 symbols
df2 &lt;- data.frame(x = 1:5, 
                  y = rep(rev(seq(0, 24, by = 5)), each = 5), 
                  z = 1:25)
s &lt;- ggplot(df2, aes(x = x, y = y)) + 
  scale_shape_identity() + 
  geom_text(aes(label = z, y = y - 1)) + 
  theme_void()
s + geom_point(aes(shape = z), size = 4) </code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<hr />
<p>While all symbols have a foreground colour, symbols 21-25 also take a background colour (fill)</p>
<pre class="r"><code>s + geom_point(aes(shape = z), size = 4, colour = &quot;navy&quot;) </code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<hr />
<pre class="r"><code>s + geom_point(aes(shape = z), size = 4, colour = &quot;navy&quot;, fill = &quot;orchid&quot;) </code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>For the rest of today, we’ll play with the <code>animal_words</code> dataset.</p>
</div>
<div id="plot-points-and-lines" class="section level1">
<h1><span class="header-section-number">7</span> Plot points and lines</h1>
<p>Make a base plot with age (in months) along the x-axis and the proportion of children producing each word along the y-axis.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, y = prop_produced)) + 
  geom_point(size = 2)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="discrete-colors" class="section level1">
<h1><span class="header-section-number">8</span> Discrete colors</h1>
<div id="default-discrete-palette" class="section level2">
<h2><span class="header-section-number">8.1</span> Default discrete palette</h2>
<p>Challenge: color the points by <code>animal_word</code> by adding a global aesthetic.</p>
<pre class="r"><code>animal_dot &lt;- ggplot(animal_words, aes(x = age, 
                         y = prop_produced,
                         color = animal_word)) + 
  geom_point(size = 2) +
  labs(x = &quot;Age (months)&quot;, y = &quot;Proportion of Children Producing&quot;)
animal_dot</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>We would call this a qualitative palette and it works well for these data. The addition of <code>scale_color_hue</code> changes nothing.</p>
<pre class="r"><code>animal_dot +
  scale_color_hue()</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="set-luminance-and-saturation-chromaticity" class="section level2">
<h2><span class="header-section-number">8.2</span> Set luminance and saturation (chromaticity)</h2>
<p>We can change these settings within the default color palette by adding the layer <code>scale_color_hue</code>.</p>
<pre class="r"><code># All defaults
animal_dot +
  scale_color_hue(l = 65, c = 100)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code># Use luminance=45, instead of default 65
animal_dot +
  scale_color_hue(l = 45)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
<pre class="r"><code># Reduce saturation (chromaticity) from 100 to 50, and increase luminance
animal_dot +
  scale_color_hue(l = 75, c = 50)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-9-3.png" width="672" /></p>
</div>
<div id="set-discrete-colors" class="section level2">
<h2><span class="header-section-number">8.3</span> Set discrete colors</h2>
<p>We can change the actual colors used by adding the layer <code>scale_color_manual</code> or <code>scale_fill_manual</code>. Confusion between which to use when is often the cause of much frustration!</p>
<pre class="r"><code>animal_dot +
  scale_color_manual(values = c(&quot;cornflowerblue&quot;, 
                                &quot;seagreen&quot;, &quot;coral&quot;))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #1:
</div>
<div class="panel-body">
<p>Why doesn’t this code work?</p>
<pre class="r"><code>animal_dot +
  scale_fill_manual(values = c(&quot;cornflowerblue&quot;, 
                               &quot;seagreen&quot;, &quot;coral&quot;))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
</div>
<p>Or this?…</p>
<pre class="r"><code>animal_dot +
  scale_fill_manual(values = c(&quot;cornflowerblue&quot;, 
                               &quot;seagreen&quot;, &quot;coral&quot;))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p><strong>Hint</strong>: think about which <em>shape</em> is the default for <code>geom_point</code>…</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced,
                         color = animal_word)) + 
  geom_point(shape = 20) </code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p><em>Challenge</em>: Try adding a black outline to the points and color by <code>style</code>. If that was easy, change the color values for <code>style</code> from the defaults.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced,
                         fill = animal_word)) + 
  geom_point(shape = 21) +
  scale_fill_manual(values = c(&quot;cornflowerblue&quot;, 
                               &quot;seagreen&quot;, &quot;coral&quot;))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p><em>Challenge</em>: Using <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">this link</a>, find 3 new named colors, and save them as an object called <code>my_colors</code> outside of <code>ggplot2</code>; then call that object within the <code>scale_colour_manual</code> function.</p>
<pre class="r"><code>my_colors &lt;- c(&quot;cadetblue&quot;, &quot;steelblue&quot;, &quot;salmon&quot;)
animal_dot +
  scale_color_manual(values = my_colors)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p><em>Challenge</em>: Try using non-named R colors, like hexadecimal colors (#rrggbb). Some basic ones are here:</p>
<p><a href="https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/" class="uri">https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/</a></p>
<p>Parse the hexadecimal string like so: #rrggbb, where rr, gg, and bb refer to color intensity in the red, green, and blue channels, respectively.</p>
<pre class="r"><code>#&#39; these are all 6 seaborn color palettes
#` from https://github.com/mwaskom/seaborn/blob/master/seaborn/palettes.py
sb_deep &lt;- c(&quot;#4C72B0&quot;, &quot;#55A868&quot;, &quot;#C44E52&quot;,
        &quot;#8172B2&quot;, &quot;#CCB974&quot;, &quot;#64B5CD&quot;)
sb_muted &lt;- c(&quot;#4878CF&quot;, &quot;#6ACC65&quot;, &quot;#D65F5F&quot;,
         &quot;#B47CC7&quot;, &quot;#C4AD66&quot;, &quot;#77BEDB&quot;)
sb_pastel &lt;- c(&quot;#92C6FF&quot;, &quot;#97F0AA&quot;, &quot;#FF9F9A&quot;,
          &quot;#D0BBFF&quot;, &quot;#FFFEA3&quot;, &quot;#B0E0E6&quot;)
sb_bright &lt;- c(&quot;#003FFF&quot;, &quot;#03ED3A&quot;, &quot;#E8000B&quot;,
                    &quot;#8A2BE2&quot;, &quot;#FFC400&quot;, &quot;#00D7FF&quot;)
sb_dark &lt;- c(&quot;#001C7F&quot;, &quot;#017517&quot;, &quot;#8C0900&quot;,
        &quot;#7600A1&quot;, &quot;#B8860B&quot;, &quot;#006374&quot;)
sb_colorblind &lt;- c(&quot;#0072B2&quot;, &quot;#009E73&quot;, &quot;#D55E00&quot;,
                        &quot;#CC79A7&quot;, &quot;#F0E442&quot;, &quot;#56B4E9&quot;)</code></pre>
<pre class="r"><code>animal_dot +
  scale_colour_manual(values = sb_colorblind)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="built-in-discrete-palettes" class="section level2">
<h2><span class="header-section-number">8.4</span> Built-in discrete palettes</h2>
<div id="colorbrewer" class="section level3">
<h3><span class="header-section-number">8.4.1</span> Colorbrewer</h3>
<pre class="r"><code>library(RColorBrewer)
brewer.pal(5, &quot;Dark2&quot;)
display.brewer.pal(5, &quot;Dark2&quot;)</code></pre>
<pre class="r"><code>animal_dot +
  scale_color_brewer(palette = &quot;Dark2&quot;)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p><em>Challenge</em>: Again! Try adding a black outline to the points and color by <code>Species</code> using the <code>Dark2</code> palette.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced,
                         fill = animal_word)) +
  geom_point(size = 3, shape = 21) + 
  scale_fill_brewer(palette = &quot;Dark2&quot;)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
<div id="wes-anderson-palettes" class="section level3">
<h3><span class="header-section-number">8.4.2</span> Wes Anderson palettes</h3>
<p>My favorite!</p>
<pre class="r"><code>library(wesanderson)</code></pre>
<pre class="r"><code>names(wes_palettes)</code></pre>
<pre><code> [1] &quot;GrandBudapest&quot;  &quot;Moonrise1&quot;      &quot;Royal1&quot;         &quot;Moonrise2&quot;     
 [5] &quot;Cavalcanti&quot;     &quot;Royal2&quot;         &quot;GrandBudapest2&quot; &quot;Moonrise3&quot;     
 [9] &quot;Chevalier&quot;      &quot;Zissou&quot;         &quot;FantasticFox&quot;   &quot;Darjeeling&quot;    
[13] &quot;Rushmore&quot;       &quot;BottleRocket&quot;   &quot;Darjeeling2&quot;   </code></pre>
<pre class="r"><code>wes_palette(&quot;GrandBudapest2&quot;)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<pre class="r"><code>str(wes_palette(&quot;GrandBudapest2&quot;))</code></pre>
<pre><code>Class &#39;palette&#39;  atomic [1:4] #E6A0C4 #C6CDF7 #D8A499 #7294D4
  ..- attr(*, &quot;name&quot;)= chr &quot;GrandBudapest2&quot;</code></pre>
<pre class="r"><code>wes_palette(&quot;GrandBudapest2&quot;)[1:4]</code></pre>
<pre><code>[1] &quot;#E6A0C4&quot; &quot;#C6CDF7&quot; &quot;#D8A499&quot; &quot;#7294D4&quot;</code></pre>
<pre class="r"><code>wes_palette(&quot;GrandBudapest2&quot;)[c(1,4)]</code></pre>
<pre><code>[1] &quot;#E6A0C4&quot; &quot;#7294D4&quot;</code></pre>
<pre class="r"><code>animal_dot +
  scale_color_manual(values = wes_palette(&quot;Darjeeling&quot;))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<pre class="r"><code>animal_dot +
  scale_color_manual(values = wes_palette(&quot;FantasticFox&quot;))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-23-2.png" width="672" /></p>
<p><em>Challenge!</em>: What if you just don’t want to use the colors in the order they are in?</p>
<pre class="r"><code>animal_dot +
  scale_color_manual(values = wes_palette(&quot;Darjeeling&quot;)[3:5])</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<pre class="r"><code>animal_dot +
  scale_color_manual(values = wes_palette(&quot;FantasticFox&quot;)[c(2, 3, 5)])</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-24-2.png" width="672" /></p>
</div>
<div id="ggthemes-palettes" class="section level3">
<h3><span class="header-section-number">8.4.3</span> <code>ggthemes</code> palettes</h3>
<pre class="r"><code>library(ggthemes)</code></pre>
<pre class="r"><code>animal_dot +
  scale_color_fivethirtyeight()</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<pre class="r"><code>animal_dot +
  scale_color_economist()</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-26-2.png" width="672" /></p>
</div>
<div id="palettes-from-the-queen-bee" class="section level3">
<h3><span class="header-section-number">8.4.4</span> Palettes from <a href="https://github.com/dill/beyonce">the Queen Bee</a></h3>
<pre class="r"><code>install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;dill/beyonce&quot;)
library(beyonce)</code></pre>
<pre class="r"><code>beyonce_palette(18)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<pre class="r"><code>animal_dot +
  scale_color_manual(values = beyonce_palette(18)[3:5])</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p><em>Challenge!</em>: Use <code>beyonce_palette</code> 18, but only the first, fourth, and fifth colors in the palette.</p>
<pre class="r"><code>animal_dot +
  scale_color_manual(values = beyonce_palette(18)[c(1, 4, 5)])</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
</div>
<div id="viridis-palettes" class="section level3">
<h3><span class="header-section-number">8.4.5</span> Viridis palettes</h3>
<p>Read more here in the <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">viridis vignette</a></p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced,
                         color = animal_word)) +
  geom_point() +
  scale_color_viridis(discrete = TRUE)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p><em>Challenge</em>: Use the <code>viridis</code> package to color the points by <code>Species</code>; make the outline of the points “midnightblue”.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced,
                         fill = animal_word)) +
  geom_point(size = 3, shape = 21, colour = &quot;midnightblue&quot;) + 
  scale_fill_viridis(discrete = TRUE)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
</div>
</div>
<div id="greyscale-for-discrete" class="section level2">
<h2><span class="header-section-number">8.5</span> Greyscale for discrete</h2>
<pre class="r"><code>animal_dot +
  scale_color_grey() +
  theme_bw()</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p>Set start and end</p>
<pre class="r"><code>animal_dot +
  scale_color_grey(start = 0.3, end = 1) </code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced,
                         fill = animal_word)) +
  geom_point(shape = 21) +
  scale_fill_grey(start = 0.3, end = 1)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
</div>
<div id="adding-layers" class="section level2">
<h2><span class="header-section-number">8.6</span> Adding layers</h2>
<p>Now we’ll start adding layers, in the shape of lines.</p>
<p>Try adding <code>geom_line()</code> to this plot to connect the dots.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = animal_word)) + 
  geom_point() +
  geom_line()</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<p>Yes that is a mess. Look at <code>?geom_line</code>- it says that “<code>geom_line()</code> connects them in order of the variable on the x axis.” This is not what we want! Read further: “The <code>group</code> aesthetic determines which cases are connected together.”</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = animal_word)) + 
  geom_point() +
  geom_line(aes(group = animal_word))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>OK now try adding a loess line using <code>geom_smooth</code>. Use <code>?geom_smooth</code> to figure out how to get rid of the gray standard error ribbon.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = animal_word)) + 
  geom_point() +
  geom_smooth(aes(group = animal_word), method = &quot;loess&quot;, se = FALSE, lwd = .5)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p><em>Challenge!</em>: Create 3 new plots using the <code>iris</code> data.</p>
<pre class="r"><code>ggplot(beer, aes(x = ibu, y = abv, colour = style)) +
  geom_point(size = 3)</code></pre>
<pre><code>Error in ggplot(beer, aes(x = ibu, y = abv, colour = style)): object &#39;beer&#39; not found</code></pre>
<p>First, add a linear regression line for each <code>Species</code> to your plot and color both the points and the line by <code>Species</code> (you may want to remove the standard error ribbon to make this plot more readable).</p>
<pre class="r"><code>ggplot(beer, aes(x = ibu, y = abv, colour = style)) +
  geom_point(size = 3) +
  stat_smooth(method = &quot;lm&quot;, se = FALSE)</code></pre>
<pre><code>Error in ggplot(beer, aes(x = ibu, y = abv, colour = style)): object &#39;beer&#39; not found</code></pre>
<p>Second, add a single linear regression line across all <code>Species</code> to your plot and color <em>only</em> the points by <code>Species</code> (again, you may want to remove the standard error ribbon to make this plot more readable). Make the regression line some color other than the default.</p>
<pre class="r"><code>ggplot(beer, aes(x = ibu, y = abv)) +
  geom_point(aes(colour = style), size = 3) +
  stat_smooth(method = &quot;lm&quot;, se = FALSE, color = &quot;darkgray&quot;)</code></pre>
<pre><code>Error in ggplot(beer, aes(x = ibu, y = abv)): object &#39;beer&#39; not found</code></pre>
<p>Third, add a linear regression line for each <code>Species</code> to your plot and color <em>only</em> the points by <code>Species</code> (again, you may want to remove the standard error ribbon to make this plot more readable). Make the regression lines some color other than the default.</p>
<pre class="r"><code>ggplot(beer, aes(x = ibu, y = abv, group = style)) +
  geom_point(aes(color = style), size = 3) +
  stat_smooth(method = &quot;lm&quot;, se = FALSE, color = &quot;darkgray&quot;)</code></pre>
<pre><code>Error in ggplot(beer, aes(x = ibu, y = abv, group = style)): object &#39;beer&#39; not found</code></pre>
<p>If this was all easy…</p>
<ul>
<li>color by <code>Species</code></li>
<li>change the default coloring to new colors</li>
<li>make the regression lines all one color</li>
<li>add a <code>facet_wrap</code> by <code>Species</code> <em>and</em></li>
<li>remove the legend (since it is redundant with the facet labels).</li>
<li>(I used the <code>theme_minimal</code>)</li>
</ul>
<pre class="r"><code>ggplot(iris, aes(Sepal.Length, Sepal.Width, group = Species)) +
  geom_point(aes(color = Species), size = 3) +
  stat_smooth(method = &quot;lm&quot;, se = FALSE, color = &quot;darkgray&quot;) +
  facet_wrap(~Species) +
  scale_color_manual(values = sb_colorblind, guide = FALSE) +
  theme_minimal()</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p><a href="https://drsimonj.svbtle.com/plotting-background-data-for-groups-with-ggplot2" class="uri">https://drsimonj.svbtle.com/plotting-background-data-for-groups-with-ggplot2</a></p>
</div>
</div>
<div id="continuous-colors" class="section level1">
<h1><span class="header-section-number">9</span> Continuous colors</h1>
<div id="default-continuous-palette" class="section level2">
<h2><span class="header-section-number">9.1</span> Default continuous palette</h2>
<p>Let’s map color to a continuous variable, Sepal.Width:</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  geom_line(aes(group = animal_word))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
</div>
<div id="color-choice-with-continuous-variables-scale_color_gradient-scale_color_gradient2" class="section level2">
<h2><span class="header-section-number">9.2</span> Color choice with continuous variables (<code>scale_color_gradient()</code>, <code>scale_color_gradient2()</code>)</h2>
<p>You can reverse the gradient scale…</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  geom_line(aes(group = animal_word)) +
  scale_color_gradient(trans = &quot;reverse&quot;)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  geom_line(aes(group = animal_word)) +
  scale_color_gradient(low = &quot;white&quot;, high = &quot;red&quot;)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-46-1.png" width="672" /></p>
<p><em>Challenge</em>: Make this same plot using a grayscale gradient.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  geom_line(aes(group = animal_word)) +
  scale_color_gradient(low = &quot;gray90&quot;, high = &quot;black&quot;)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>
<p>So <code>scale_color_gradient</code> gives you a sequential gradient, but you may want a diverging color scheme instead.</p>
<pre class="r"><code># Diverging color scheme
med_age &lt;- animal_words %&gt;% 
  summarize(mos = median(age)) %&gt;% 
  pull()
ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  geom_line(aes(group = animal_word)) +
  scale_color_gradient2(midpoint = med_age,
                      low=&quot;blue&quot;, mid=&quot;white&quot;, high=&quot;red&quot; )</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
</div>
<div id="built-in-continuous-palettes" class="section level2">
<h2><span class="header-section-number">9.3</span> Built-in continuous palettes</h2>
<div id="use-rcolorbrewer-with-scale_color_gradientn" class="section level3">
<h3><span class="header-section-number">9.3.1</span> Use <code>RColorBrewer</code> with <code>scale_color_gradientn</code></h3>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  scale_color_gradientn(colours = brewer.pal(n=5, name=&quot;PuBuGn&quot;))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<p>Reverse the colors…</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  scale_color_gradientn(colours = rev(brewer.pal(n=5, name=&quot;PuBuGn&quot;)))</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
</div>
<div id="viridis" class="section level3">
<h3><span class="header-section-number">9.3.2</span> Viridis</h3>
<p>Read more here in the <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">viridis vignette</a></p>
<pre class="r"><code>library(viridis)</code></pre>
<p>The default is the <code>viridis</code> palette within the <code>viridis</code> package!</p>
<p>Note! For discrete == FALSE (the default) all other arguments are as to <code>scale_fill_gradientn</code> or <code>scale_color_gradientn</code>.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  scale_color_viridis()</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  scale_color_viridis(option = &quot;magma&quot;)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<p><em>Challenge</em>: Read the help function for <code>?scale_color_viridis</code> and use the “inferno” palette <em>in reverse</em>.</p>
<pre class="r"><code>ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = age)) + 
  geom_point() +
  scale_color_viridis(option = &quot;inferno&quot;, begin = 1, end = 0)</code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<p>What if I want to separate?? <a href="https://github.com/tidyverse/ggplot2/issues/2345" class="uri">https://github.com/tidyverse/ggplot2/issues/2345</a></p>
<pre class="r"><code>cols = c(&quot;#E69F00&quot;, &quot;#56B4E9&quot;, &quot;#009E73&quot;)
cols_dark = c(&#39;#C18511&#39;, &#39;#289ACF&#39;, &#39;#0D8561&#39;)
ggplot(animal_words, aes(x = age, 
                         y = prop_produced, 
                         color = animal_word)) + 
  geom_point(aes(point_color = animal_word)) +
  geom_line(aes(group = animal_word)) +
  scale_color_manual(values = cols) +
  ggplot2:::manual_scale(&quot;point_color&quot;, values = cols_dark, guide = &quot;none&quot;) </code></pre>
<p><img src="03-colors_and_animal_words_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
</div>
</div>
</div>

<p>
<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="by-nc.png" height="400" width="65"/></a>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
